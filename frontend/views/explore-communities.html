<main class="explore-main">
    <!-- Top bar: left create button, right search input -->
    <div class="explore-topbar">
        <div class="explore-topbar-left">
            <button class="explore-create-btn" type="button" data-bs-toggle="modal" data-bs-target="#createCommunityModal">Create</button>
        </div>
        <div class="explore-topbar-right">
            <label for="explore-search" class="visually-hidden">Search communities</label>
            <input id="explore-search" class="explore-search-input" type="search" placeholder="Search communities" />
        </div>
    </div>

    <!-- Communities will be loaded here -->
    <div style="text-align:center;padding:40px;">
        <div class="spinner-border text-danger" role="status">
            <span class="sr-only">Loading communities...</span>
        </div>
    </div>
</main>

<script>
function loadExploreCommunities() {
    CommunityService.loadAllCommunities(function(communities) {
        const currentUser = Utils.parseJwt(localStorage.getItem("user_token"));
        const userId = currentUser.user.UserID;
        CommunityService.renderCommunities(communities, userId);
    });
}

// Load communities on page load
loadExploreCommunities();
</script>