<section class="vh-100">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-12 col-xl-6">

                <div class="card" style="border-radius: 15px;">
                    <div class="card-body">
                        <h3 class="mb-4 text-center">Edit Profile</h3>

                        <form id="editProfileForm">
                            <div class="mb-3">
                                <label for="editFullName" class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="editFullName" name="fullName" required maxlength="100" placeholder="Enter your full name">
                            </div>

                            <div class="mb-3">
                                <label for="editBio" class="form-label">Bio</label>
                                <textarea class="form-control" id="editBio" name="bio" rows="4" maxlength="500" placeholder="Tell us about yourself..."></textarea>
                                <small class="text-muted">Max 500 characters</small>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                                <a href="#profile" class="btn btn-secondary">Cancel</a>
                            </div>
                        </form>

                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<script>
function loadEditProfile() {
    const currentUser = Utils.parseJwt(localStorage.getItem("user_token"));
    const userId = currentUser.user.UserID;
    
    // Load current user data
    UserService.getCurrentUserProfile(function(user) {
        $("#editFullName").val(user.FullName || '');
        $("#editBio").val(user.Bio || '');
    });
    
    // Handle form submission
    $("#editProfileForm").off('submit').on("submit", function(e) {
        e.preventDefault();
        
        const fullName = $("#editFullName").val().trim();
        const bio = $("#editBio").val().trim();
        
        if (fullName) {
            UserService.updateProfile(userId, fullName, bio, function() {
                window.location.hash = "#profile";
            });
        } else {
            toastr.error("Please enter your full name");
        }
    });
}

// Load edit profile on page load
loadEditProfile();
</script>